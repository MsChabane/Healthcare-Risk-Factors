schema: '2.0'
stages:
  clean_data:
    cmd: python -m src.pipeline.data.clean
    deps:
    - path: data/raw/
      hash: md5
      md5: 49d5a382a86cada1480cf097d22f3288.dir
      size: 3379281
      nfiles: 2
    - path: src/constant/__init__.py
      hash: md5
      md5: afaad55ea3a5a31f6875ffe94dd2503d
      size: 1253
    - path: src/pipeline/data/clean.py
      hash: md5
      md5: cd18ee5907e78c9b4b9bc31a423bcae8
      size: 360
    outs:
    - path: data/cleaned/cleaned.csv
      hash: md5
      md5: 580f70765276119bb41c3931b5bf69e6
      size: 1233955
  preprocess:
    cmd: python -m src.pipeline.features.preprocess
    deps:
    - path: data/cleaned/cleaned.csv
      hash: md5
      md5: 580f70765276119bb41c3931b5bf69e6
      size: 1233955
    - path: src/constant/__init__.py
      hash: md5
      md5: afaad55ea3a5a31f6875ffe94dd2503d
      size: 1253
    - path: src/pipeline/features/preprocess.py
      hash: md5
      md5: 27b43fa2f730e1173f8cd3bff093c18e
      size: 2461
    params:
      params.yaml:
        preprocessing:
          normalization: false
          scaling: standard
          test_size: 0.2
          random_state: 42
    outs:
    - path: data/processed/test.csv
      hash: md5
      md5: 181a87afee855f7e9dfeb98a60b08ec9
      size: 331333
    - path: data/processed/train.csv
      hash: md5
      md5: 4e675f972242d9d0b69283fa58623e9e
      size: 2649334
    - path: data/processed/val.csv
      hash: md5
      md5: 382e0e0b3fbb095206be098f004a3c1a
      size: 331586
    - path: models/gender_map.pkl
      hash: md5
      md5: c6aa9cc62ffc628ee8deabaa9d523c24
      size: 36
    - path: models/target_encoder.pkl
      hash: md5
      md5: 50a61c3b81ac8f22c2b1ef698965069b
      size: 549
  train_model:
    cmd: python -m src.pipeline.model.train
    deps:
    - path: data/processed/train.csv
      hash: md5
      md5: 4e675f972242d9d0b69283fa58623e9e
      size: 2649334
    - path: data/processed/val.csv
      hash: md5
      md5: 382e0e0b3fbb095206be098f004a3c1a
      size: 331586
    - path: src/constant/__init__.py
      hash: md5
      md5: afaad55ea3a5a31f6875ffe94dd2503d
      size: 1253
    - path: src/pipeline/model/train.py
      hash: md5
      md5: 2ffe07dee574d67905a9178072e621ee
      size: 1447
    params:
      params.yaml:
        model:
          params:
            objective: multi:softprob
            n_estimators: 1000
            max_depth: 8
            learning_rate: 0.005
            subsample: 0.8
            colsample_bytree: 0.8
            random_state: 42
            use_label_encoder: false
            eval_metric: auc
            early_stopping_rounds: 10
            class_weight: balanced
    outs:
    - path: models/classifier.pkl
      hash: md5
      md5: 5f0af0580a762d16d8cc6960bac2c522
      size: 1526420
  evaluate_model:
    cmd: python -m src.pipeline.model.eval
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: 181a87afee855f7e9dfeb98a60b08ec9
      size: 331333
    - path: models/classifier.pkl
      hash: md5
      md5: 5f0af0580a762d16d8cc6960bac2c522
      size: 1526420
    - path: models/target_encoder.pkl
      hash: md5
      md5: 50a61c3b81ac8f22c2b1ef698965069b
      size: 549
    - path: src/constant/__init__.py
      hash: md5
      md5: afaad55ea3a5a31f6875ffe94dd2503d
      size: 1253
    - path: src/pipeline/model/eval.py
      hash: md5
      md5: 5f62b01f89fcf41a9cbbe9c17737feb5
      size: 3817
    params:
      params.yaml:
        eval:
          mlflow_experiment_name: XGBClassifier_Experiment
    outs:
    - path: reports/
      hash: md5
      md5: 6bbc993f249296a30c8d9fa28bc9c217.dir
      size: 83514
      nfiles: 5
